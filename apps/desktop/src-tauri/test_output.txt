
running 150 tests
test commands::network_test::tests::test_connection_state_equality ... ok
test commands::network_test::tests::test_network_state_default ... ok
test commands::network_test::tests::test_network_status_stopped ... ok
test commands::network_test::tests::test_network_status_serialization ... ok
test hardware::drawer::tests::test_drawer_command_pin2 ... ok
test commands::network_test::tests::test_connection_state_variants ... ok
test hardware::scanner::tests::test_local_network_detection ... ok
test hardware::drawer::tests::test_drawer_disabled ... ok
test hardware::scanner::tests::test_barcode_format_detection ... ok
test hardware::scanner::tests::test_ean8_validation ... ok
test hardware::printer::tests::test_printer_init ... ok
test hardware::scanner::tests::test_normalize_barcode ... ok
test hardware::scanner::tests::test_parse_serial_input ... ok
test hardware::scale::tests::test_weighted_barcode ... ok
test middleware::permissions::tests::test_cashier_limited_permissions ... ok
test middleware::permissions::tests::test_viewer_readonly ... ok
test hardware::printer::tests::test_receipt_builder ... ok
test hardware::scale::tests::test_toledo_parse ... ok
test hardware::scanner::tests::test_ean13_validation ... ok
test nfce::access_key::tests::test_uf_codes ... ok
test nfce::access_key::tests::test_check_digit_calculation ... ok
test nfce::access_key::tests::test_formatted_key ... ok
test hardware::drawer::tests::test_drawer_command_pin5 ... ok
test hardware::scale::tests::test_weighted_barcode_price ... ok
test middleware::session::tests::test_session_lifecycle ... ok
test nfce::certificate::tests::test_extract_cnpj_from_text ... ok
test license::client::tests::test_config_default ... ok
test middleware::permissions::tests::test_admin_has_all_permissions ... ok
test nfce::contingency::tests::test_save_and_list_pending ... ok
test nfce::danfe::tests::test_cmd_bold_on ... ok
test nfce::access_key::tests::test_generate_access_key ... ok
test nfce::access_key::tests::test_invalid_key ... ok
test nfce::access_key::tests::test_validate_access_key ... ok
test nfce::danfe::tests::test_format_payment_method ... ok
test nfce::danfe::tests::test_cmd_align_center ... ok
test nfce::contingency::tests::test_mark_as_transmitted ... ok
test nfce::danfe::tests::test_format_access_key ... ok
test nfce::danfe::tests::test_cmd_cut ... ok
test nfce::qrcode::tests::test_generate_hash_v2 ... ok
test nfce::endpoints::tests::test_sp_homologation_url ... ok
test nfce::danfe::tests::test_cmd_init ... ok
test nfce::endpoints::tests::test_sp_production_url ... ok
test nfce::danfe::tests::test_generate_escpos ... ok
test nfce::endpoints::tests::test_status_url ... ok
test nfce::endpoints::tests::test_svrs_fallback ... ok
test nfce::danfe::tests::test_format_cnpj ... ok
test nfce::qrcode::tests::test_generate_url ... ok
test nfce::xml_builder::tests::test_xml_contains_emitter ... ok
test nfce::xml_builder::tests::test_build_xml ... ok
test nfce::webservice::tests::test_parse_authorization_response ... ok
test nfce::qrcode::tests::test_get_base_url_sp_production ... ok
test nfce::qrcode::tests::test_get_base_url_sp_homologation ... ok
test nfce::webservice::tests::test_parse_status_response ... ok
test nfce::webservice::tests::test_create_query_envelope ... ok
test nfce::xml_builder::tests::test_xml_contains_totals ... ok
test nfce::webservice::tests::test_create_status_envelope ... ok
test nfce::xml_builder::tests::test_xml_contains_item ... ok
test nfce::qrcode::tests::test_generate_svg ... ok
test nfce::certificate::tests::test_days_until_expiration ... ok
test nfce::qrcode::tests::test_generate_png ... ok
test nfce::signer::tests::test_sign_inserts_signature ... ok
test repositories::cash_repository::cash_repository_test::tests::test_find_current_session ... ok
test repositories::cash_repository::cash_repository_test::tests::test_find_movements_by_session ... ok
test repositories::cash_repository::cash_repository_test::tests::test_open_session_already_open ... ok
test repositories::cash_repository::cash_repository_test::tests::test_open_session_success ... ok
test repositories::cash_repository::cash_repository_test::tests::test_close_session ... ok
test repositories::category_repository::category_repository_test::tests::test_create_category ... ok
test repositories::category_repository::category_repository_test::tests::test_find_by_id ... ok
test repositories::cash_repository::cash_repository_test::tests::test_session_history ... ok
test repositories::cash_repository::cash_repository_test::tests::test_add_movement ... ok
test repositories::category_repository::category_repository_test::tests::test_find_all_active ... ok
test repositories::category_repository::category_repository_test::tests::test_delete_category ... ok
test repositories::category_repository::category_repository_test::tests::test_find_all_with_count ... ok
test repositories::employee_repository::employee_repository_test::tests::test_authenticate_pin ... ok
test repositories::category_repository::category_repository_test::tests::test_find_children ... ok
test repositories::category_repository::category_repository_test::tests::test_update_category ... ok
test repositories::employee_repository::employee_repository_test::tests::test_find_all_active ... ok
test repositories::employee_repository::employee_repository_test::tests::test_role_formatting ... ok
test repositories::employee_repository::employee_repository_test::tests::test_deactivate_employee ... ok
test repositories::employee_repository::employee_repository_test::tests::test_find_by_cpf ... ok
test repositories::product_repository::product_repository_test::tests::test_create_product_duplicate_barcode ... ok
test repositories::employee_repository::employee_repository_test::tests::test_create_employee_duplicate_pin ... ok
test repositories::product_repository::product_repository_test::tests::test_create_product ... ok
test repositories::employee_repository::employee_repository_test::tests::test_update_employee ... ok
test repositories::product_repository::product_repository_test::tests::test_delete_product ... ok
test repositories::product_repository::product_repository_test::tests::test_find_by_barcode ... ok
test repositories::product_repository::product_repository_test::tests::test_find_by_internal_code ... ok
test repositories::employee_repository::employee_repository_test::tests::test_create_employee ... ok
test repositories::product_repository::product_repository_test::tests::test_get_low_stock_products ... ok
test repositories::sale_repository::tests::test_cancel_sale ... ok
test repositories::product_repository::product_repository_test::tests::test_search_products ... ok
test repositories::product_repository::product_repository_test::tests::test_find_with_category_filter ... ok
test repositories::product_repository::product_repository_test::tests::test_update_product ... ok
test repositories::sale_repository::tests::test_create_sale_insufficient_stock ... ok
test repositories::sale_repository::tests::test_create_sale_with_discount ... ok
test repositories::sale_repository::tests::test_create_sale_cash ... ok
test repositories::sale_repository::tests::test_find_sale_by_id ... ok
test repositories::sale_repository::tests::test_find_today_sales ... ok
test repositories::sale_repository::tests::test_get_next_daily_number ... ok
test repositories::sale_repository::tests::test_get_daily_summary ... ok
test repositories::stock_repository::tests::test_find_expiring_lots ... FAILED
test repositories::stock_repository::tests::test_create_stock_movement_exit ... ok
test repositories::service_order_repository_test::test_create_service_order_increments_number ... ok
test repositories::stock_repository::tests::test_create_stock_movement_entry ... ok
test repositories::stock_repository::tests::test_find_lots_by_product ... FAILED
test repositories::stock_repository::tests::test_find_recent_movements ... ok
test repositories::stock_repository::tests::test_find_movements_by_product ... ok
test repositories::stock_repository::tests::test_find_movement_by_id ... ok
test repositories::stock_repository_test::test_create_stock_movement_entry ... ok
test repositories::stock_repository_test::test_create_stock_movement_exit ... ok
test repositories::stock_repository_test::test_find_movement_by_id_not_found ... ok
test services::backup_service::tests::test_checksum ... ok
test services::backup_service::tests::test_derive_key ... ok
test services::backup_service::tests::test_encrypt_decrypt ... ok
test services::mdns_service::tests::test_default_config ... ok
test services::mdns_service::tests::test_get_local_ip ... ok
test services::mdns_service::tests::test_mdns_service_creation ... ok
test services::mobile_events::tests::test_event_service ... ok
test services::mobile_events::tests::test_multiple_subscribers ... ok
test services::mobile_handlers::auth::tests::test_role_mapping ... ok
test services::mobile_handlers::categories::tests::test_build_category_tree ... ok
test services::mobile_handlers::expiration::tests::test_parse_action ... ok
test services::mobile_handlers::expiration::tests::test_permissions ... ok
test services::mobile_handlers::inventory::tests::test_permissions ... ok
test services::mobile_handlers::products::tests::test_permissions ... ok
test services::mobile_handlers::stock::tests::test_parse_movement_type ... ok
test services::mobile_handlers::stock::tests::test_permissions ... ok
test repositories::stock_repository_test::test_find_movements_by_product ... ok
test services::mobile_handlers::system::tests::test_ping ... ok
test services::mobile_protocol::tests::test_mobile_action_parsing ... ok
test services::mobile_protocol::tests::test_mobile_event_new ... ok
test services::mobile_protocol::tests::test_mobile_response_error ... ok
test services::mobile_protocol::tests::test_mobile_response_success ... ok
test services::mobile_protocol::tests::test_requires_auth ... ok
test services::mobile_server::tests::test_config_default ... ok
test repositories::stock_repository_test::test_find_movement_by_id ... ok
test services::mobile_session::tests::test_invalidate_session ... ok
test services::mobile_session::tests::test_create_session ... ok
test services::mobile_session::tests::test_max_sessions_per_operator ... ok
test services::mobile_session::tests::test_validate_token ... ok
test repositories::stock_repository_test::test_stock_update_after_movement ... ok
test repositories::stock_repository_test::test_find_recent_movements ... ok
test repositories::supplier_repository::supplier_repository_test::tests::test_create_supplier ... ok
test repositories::supplier_repository::supplier_repository_test::tests::test_delete_supplier ... ok
test repositories::supplier_repository::supplier_repository_test::tests::test_find_all_active ... ok
test repositories::supplier_repository::supplier_repository_test::tests::test_create_duplicate_cnpj ... ok
test repositories::supplier_repository::supplier_repository_test::tests::test_find_by_cnpj ... ok
test repositories::supplier_repository::supplier_repository_test::tests::test_find_by_id ... ok
test repositories::supplier_repository::supplier_repository_test::tests::test_update_supplier ... ok
test services::mobile_handlers::system::tests::test_info ... ok

failures:

---- repositories::stock_repository::tests::test_find_expiring_lots stdout ----

thread 'repositories::stock_repository::tests::test_find_expiring_lots' panicked at src/repositories/stock_repository.rs:511:57:
called `Result::unwrap()` on an `Err` value: Sql(ColumnNotFound("manufacturing_date"))
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- repositories::stock_repository::tests::test_find_lots_by_product stdout ----

thread 'repositories::stock_repository::tests::test_find_lots_by_product' panicked at src/repositories/stock_repository.rs:492:64:
called `Result::unwrap()` on an `Err` value: Sql(ColumnNotFound("manufacturing_date"))


failures:
    repositories::stock_repository::tests::test_find_expiring_lots
    repositories::stock_repository::tests::test_find_lots_by_product

test result: FAILED. 148 passed; 2 failed; 0 ignored; 0 measured; 0 filtered out; finished in 2.85s

