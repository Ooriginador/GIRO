   Compiling giro-desktop v1.0.19 (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src-tauri)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 7.34s
     Running unittests src/lib.rs (target/debug/deps/giro_lib-edf20f50fb1a3342)

running 150 tests
test commands::network_test::tests::test_connection_state_equality ... ok
test commands::network_test::tests::test_connection_state_variants ... ok
test commands::network_test::tests::test_network_state_default ... ok
test commands::network_test::tests::test_network_status_serialization ... ok
test commands::network_test::tests::test_network_status_stopped ... ok
test hardware::drawer::tests::test_drawer_command_pin2 ... ok
test hardware::drawer::tests::test_drawer_command_pin5 ... ok
test hardware::drawer::tests::test_drawer_disabled ... ok
test hardware::printer::tests::test_printer_init ... ok
test hardware::printer::tests::test_receipt_builder ... ok
test hardware::scale::tests::test_toledo_parse ... ok
test hardware::scale::tests::test_weighted_barcode ... ok
test hardware::scale::tests::test_weighted_barcode_price ... ok
test hardware::scanner::tests::test_barcode_format_detection ... ok
test hardware::scanner::tests::test_ean13_validation ... ok
test hardware::scanner::tests::test_ean8_validation ... ok
test hardware::scanner::tests::test_local_network_detection ... ok
test hardware::scanner::tests::test_normalize_barcode ... ok
test hardware::scanner::tests::test_parse_serial_input ... ok
test license::client::tests::test_config_default ... ok
test middleware::permissions::tests::test_admin_has_all_permissions ... ok
test middleware::permissions::tests::test_cashier_limited_permissions ... ok
test middleware::permissions::tests::test_viewer_readonly ... ok
test middleware::session::tests::test_session_lifecycle ... ok
test nfce::access_key::tests::test_check_digit_calculation ... ok
test nfce::access_key::tests::test_formatted_key ... ok
test nfce::access_key::tests::test_generate_access_key ... ok
test nfce::access_key::tests::test_invalid_key ... ok
test nfce::access_key::tests::test_uf_codes ... ok
test nfce::access_key::tests::test_validate_access_key ... ok
test nfce::certificate::tests::test_days_until_expiration ... ok
test nfce::certificate::tests::test_extract_cnpj_from_text ... ok
test nfce::contingency::tests::test_mark_as_transmitted ... ok
test nfce::contingency::tests::test_save_and_list_pending ... ok
test nfce::danfe::tests::test_cmd_align_center ... ok
test nfce::danfe::tests::test_cmd_bold_on ... ok
test nfce::danfe::tests::test_cmd_cut ... ok
test nfce::danfe::tests::test_cmd_init ... ok
test nfce::danfe::tests::test_format_access_key ... ok
test nfce::danfe::tests::test_format_cnpj ... ok
test nfce::danfe::tests::test_format_payment_method ... ok
test nfce::danfe::tests::test_generate_escpos ... ok
test nfce::endpoints::tests::test_sp_homologation_url ... ok
test nfce::endpoints::tests::test_sp_production_url ... ok
test nfce::endpoints::tests::test_status_url ... ok
test nfce::endpoints::tests::test_svrs_fallback ... ok
test nfce::qrcode::tests::test_generate_hash_v2 ... ok
test nfce::qrcode::tests::test_generate_png ... ok
test nfce::qrcode::tests::test_generate_svg ... ok
test nfce::qrcode::tests::test_generate_url ... ok
test nfce::qrcode::tests::test_get_base_url_sp_homologation ... ok
test nfce::qrcode::tests::test_get_base_url_sp_production ... ok
test nfce::signer::tests::test_sign_inserts_signature ... ok
test nfce::webservice::tests::test_create_query_envelope ... ok
test nfce::webservice::tests::test_create_status_envelope ... ok
test nfce::webservice::tests::test_parse_authorization_response ... ok
test nfce::webservice::tests::test_parse_status_response ... ok
test nfce::xml_builder::tests::test_build_xml ... ok
test nfce::xml_builder::tests::test_xml_contains_emitter ... ok
test nfce::xml_builder::tests::test_xml_contains_item ... ok
test nfce::xml_builder::tests::test_xml_contains_totals ... ok
test repositories::cash_repository::cash_repository_test::tests::test_add_movement ... FAILED
test repositories::cash_repository::cash_repository_test::tests::test_close_session ... FAILED
test repositories::cash_repository::cash_repository_test::tests::test_find_current_session ... FAILED
test repositories::cash_repository::cash_repository_test::tests::test_find_movements_by_session ... FAILED
test repositories::cash_repository::cash_repository_test::tests::test_open_session_already_open ... FAILED
test repositories::cash_repository::cash_repository_test::tests::test_open_session_success ... FAILED
test repositories::cash_repository::cash_repository_test::tests::test_session_history ... FAILED
test repositories::category_repository::category_repository_test::tests::test_create_category ... FAILED
test repositories::category_repository::category_repository_test::tests::test_delete_category ... FAILED
test repositories::category_repository::category_repository_test::tests::test_find_all_active ... FAILED
test repositories::category_repository::category_repository_test::tests::test_find_all_with_count ... FAILED
test repositories::category_repository::category_repository_test::tests::test_find_by_id ... FAILED
test repositories::category_repository::category_repository_test::tests::test_find_children ... FAILED
test repositories::category_repository::category_repository_test::tests::test_update_category ... FAILED
test repositories::employee_repository::employee_repository_test::tests::test_authenticate_pin ... FAILED
test repositories::employee_repository::employee_repository_test::tests::test_create_employee ... FAILED
test repositories::employee_repository::employee_repository_test::tests::test_create_employee_duplicate_pin ... FAILED
test repositories::employee_repository::employee_repository_test::tests::test_deactivate_employee ... FAILED
test repositories::employee_repository::employee_repository_test::tests::test_find_all_active ... FAILED
test repositories::employee_repository::employee_repository_test::tests::test_find_by_cpf ... FAILED
test repositories::employee_repository::employee_repository_test::tests::test_role_formatting ... FAILED
test repositories::employee_repository::employee_repository_test::tests::test_update_employee ... FAILED
test repositories::product_repository::product_repository_test::tests::test_create_product ... FAILED
test repositories::product_repository::product_repository_test::tests::test_create_product_duplicate_barcode ... FAILED
test repositories::product_repository::product_repository_test::tests::test_delete_product ... FAILED
test repositories::product_repository::product_repository_test::tests::test_find_by_barcode ... FAILED
test repositories::product_repository::product_repository_test::tests::test_find_by_internal_code ... FAILED
test repositories::product_repository::product_repository_test::tests::test_find_with_category_filter ... FAILED
test repositories::product_repository::product_repository_test::tests::test_get_low_stock_products ... FAILED
test repositories::product_repository::product_repository_test::tests::test_search_products ... FAILED
test repositories::product_repository::product_repository_test::tests::test_update_product ... FAILED
test repositories::sale_repository::tests::test_cancel_sale ... FAILED
test repositories::sale_repository::tests::test_create_sale_cash ... FAILED
test repositories::sale_repository::tests::test_create_sale_insufficient_stock ... FAILED
test repositories::sale_repository::tests::test_create_sale_with_discount ... FAILED
test repositories::sale_repository::tests::test_find_sale_by_id ... FAILED
test repositories::sale_repository::tests::test_find_today_sales ... FAILED
test repositories::sale_repository::tests::test_get_daily_summary ... FAILED
test repositories::sale_repository::tests::test_get_next_daily_number ... FAILED
test repositories::service_order_repository_test::test_create_service_order_increments_number ... FAILED
test repositories::stock_repository::tests::test_create_stock_movement_entry ... FAILED
test repositories::stock_repository::tests::test_create_stock_movement_exit ... FAILED
test repositories::stock_repository::tests::test_find_expiring_lots ... FAILED
test repositories::stock_repository::tests::test_find_lots_by_product ... FAILED
test repositories::stock_repository::tests::test_find_movement_by_id ... FAILED
test repositories::stock_repository::tests::test_find_movements_by_product ... FAILED
test repositories::stock_repository::tests::test_find_recent_movements ... FAILED
test repositories::stock_repository_test::test_create_stock_movement_entry ... FAILED
test repositories::stock_repository_test::test_create_stock_movement_exit ... FAILED
test repositories::stock_repository_test::test_find_movement_by_id ... FAILED
test repositories::stock_repository_test::test_find_movement_by_id_not_found ... FAILED
test repositories::stock_repository_test::test_find_movements_by_product ... FAILED
test repositories::stock_repository_test::test_find_recent_movements ... FAILED
test repositories::stock_repository_test::test_stock_update_after_movement ... FAILED
test repositories::supplier_repository::supplier_repository_test::tests::test_create_duplicate_cnpj ... FAILED
test repositories::supplier_repository::supplier_repository_test::tests::test_create_supplier ... FAILED
test repositories::supplier_repository::supplier_repository_test::tests::test_delete_supplier ... FAILED
test repositories::supplier_repository::supplier_repository_test::tests::test_find_all_active ... FAILED
test repositories::supplier_repository::supplier_repository_test::tests::test_find_by_cnpj ... FAILED
test repositories::supplier_repository::supplier_repository_test::tests::test_find_by_id ... FAILED
test repositories::supplier_repository::supplier_repository_test::tests::test_update_supplier ... FAILED
test services::backup_service::tests::test_checksum ... ok
test services::backup_service::tests::test_derive_key ... ok
test services::backup_service::tests::test_encrypt_decrypt ... ok
test services::mdns_service::tests::test_default_config ... ok
test services::mdns_service::tests::test_get_local_ip ... ok
test services::mdns_service::tests::test_mdns_service_creation ... ok
test services::mobile_events::tests::test_event_service ... ok
test services::mobile_events::tests::test_multiple_subscribers ... ok
test services::mobile_handlers::auth::tests::test_role_mapping ... ok
test services::mobile_handlers::categories::tests::test_build_category_tree ... ok
test services::mobile_handlers::expiration::tests::test_parse_action ... ok
test services::mobile_handlers::expiration::tests::test_permissions ... ok
test services::mobile_handlers::inventory::tests::test_permissions ... ok
test services::mobile_handlers::products::tests::test_permissions ... ok
test services::mobile_handlers::stock::tests::test_parse_movement_type ... ok
test services::mobile_handlers::stock::tests::test_permissions ... ok
test services::mobile_handlers::system::tests::test_info ... ok
test services::mobile_handlers::system::tests::test_ping ... ok
test services::mobile_protocol::tests::test_mobile_action_parsing ... ok
test services::mobile_protocol::tests::test_mobile_event_new ... ok
test services::mobile_protocol::tests::test_mobile_response_error ... ok
test services::mobile_protocol::tests::test_mobile_response_success ... ok
test services::mobile_protocol::tests::test_requires_auth ... ok
test services::mobile_server::tests::test_config_default ... ok
test services::mobile_session::tests::test_create_session ... ok
test services::mobile_session::tests::test_invalidate_session ... ok
test services::mobile_session::tests::test_max_sessions_per_operator ... ok
test services::mobile_session::tests::test_validate_token ... ok

failures:

---- repositories::cash_repository::cash_repository_test::tests::test_add_movement stdout ----

thread 'repositories::cash_repository::cash_repository_test::tests::test_add_movement' panicked at src/repositories/cash_repository_test.rs:24:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- repositories::cash_repository::cash_repository_test::tests::test_close_session stdout ----

thread 'repositories::cash_repository::cash_repository_test::tests::test_close_session' panicked at src/repositories/cash_repository_test.rs:24:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::cash_repository::cash_repository_test::tests::test_find_current_session stdout ----

thread 'repositories::cash_repository::cash_repository_test::tests::test_find_current_session' panicked at src/repositories/cash_repository_test.rs:24:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::cash_repository::cash_repository_test::tests::test_find_movements_by_session stdout ----

thread 'repositories::cash_repository::cash_repository_test::tests::test_find_movements_by_session' panicked at src/repositories/cash_repository_test.rs:24:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::cash_repository::cash_repository_test::tests::test_open_session_already_open stdout ----

thread 'repositories::cash_repository::cash_repository_test::tests::test_open_session_already_open' panicked at src/repositories/cash_repository_test.rs:24:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::cash_repository::cash_repository_test::tests::test_open_session_success stdout ----

thread 'repositories::cash_repository::cash_repository_test::tests::test_open_session_success' panicked at src/repositories/cash_repository_test.rs:24:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::cash_repository::cash_repository_test::tests::test_session_history stdout ----

thread 'repositories::cash_repository::cash_repository_test::tests::test_session_history' panicked at src/repositories/cash_repository_test.rs:24:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::category_repository::category_repository_test::tests::test_create_category stdout ----

thread 'repositories::category_repository::category_repository_test::tests::test_create_category' panicked at src/repositories/category_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::category_repository::category_repository_test::tests::test_delete_category stdout ----

thread 'repositories::category_repository::category_repository_test::tests::test_delete_category' panicked at src/repositories/category_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::category_repository::category_repository_test::tests::test_find_all_active stdout ----

thread 'repositories::category_repository::category_repository_test::tests::test_find_all_active' panicked at src/repositories/category_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::category_repository::category_repository_test::tests::test_find_all_with_count stdout ----

thread 'repositories::category_repository::category_repository_test::tests::test_find_all_with_count' panicked at src/repositories/category_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::category_repository::category_repository_test::tests::test_find_by_id stdout ----

thread 'repositories::category_repository::category_repository_test::tests::test_find_by_id' panicked at src/repositories/category_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::category_repository::category_repository_test::tests::test_find_children stdout ----

thread 'repositories::category_repository::category_repository_test::tests::test_find_children' panicked at src/repositories/category_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::category_repository::category_repository_test::tests::test_update_category stdout ----

thread 'repositories::category_repository::category_repository_test::tests::test_update_category' panicked at src/repositories/category_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::employee_repository::employee_repository_test::tests::test_authenticate_pin stdout ----

thread 'repositories::employee_repository::employee_repository_test::tests::test_authenticate_pin' panicked at src/repositories/employee_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::employee_repository::employee_repository_test::tests::test_create_employee stdout ----

thread 'repositories::employee_repository::employee_repository_test::tests::test_create_employee' panicked at src/repositories/employee_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::employee_repository::employee_repository_test::tests::test_create_employee_duplicate_pin stdout ----

thread 'repositories::employee_repository::employee_repository_test::tests::test_create_employee_duplicate_pin' panicked at src/repositories/employee_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::employee_repository::employee_repository_test::tests::test_deactivate_employee stdout ----

thread 'repositories::employee_repository::employee_repository_test::tests::test_deactivate_employee' panicked at src/repositories/employee_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::employee_repository::employee_repository_test::tests::test_find_all_active stdout ----

thread 'repositories::employee_repository::employee_repository_test::tests::test_find_all_active' panicked at src/repositories/employee_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::employee_repository::employee_repository_test::tests::test_find_by_cpf stdout ----

thread 'repositories::employee_repository::employee_repository_test::tests::test_find_by_cpf' panicked at src/repositories/employee_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::employee_repository::employee_repository_test::tests::test_role_formatting stdout ----

thread 'repositories::employee_repository::employee_repository_test::tests::test_role_formatting' panicked at src/repositories/employee_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::employee_repository::employee_repository_test::tests::test_update_employee stdout ----

thread 'repositories::employee_repository::employee_repository_test::tests::test_update_employee' panicked at src/repositories/employee_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_create_product stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_create_product' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_create_product_duplicate_barcode stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_create_product_duplicate_barcode' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_delete_product stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_delete_product' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_find_by_barcode stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_find_by_barcode' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_find_by_internal_code stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_find_by_internal_code' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_find_with_category_filter stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_find_with_category_filter' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_get_low_stock_products stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_get_low_stock_products' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_search_products stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_search_products' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::product_repository::product_repository_test::tests::test_update_product stdout ----

thread 'repositories::product_repository::product_repository_test::tests::test_update_product' panicked at src/repositories/product_repository_test.rs:23:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::sale_repository::tests::test_cancel_sale stdout ----

thread 'repositories::sale_repository::tests::test_cancel_sale' panicked at src/repositories/sale_repository.rs:469:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::sale_repository::tests::test_create_sale_cash stdout ----

thread 'repositories::sale_repository::tests::test_create_sale_cash' panicked at src/repositories/sale_repository.rs:469:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::sale_repository::tests::test_create_sale_insufficient_stock stdout ----

thread 'repositories::sale_repository::tests::test_create_sale_insufficient_stock' panicked at src/repositories/sale_repository.rs:469:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::sale_repository::tests::test_create_sale_with_discount stdout ----

thread 'repositories::sale_repository::tests::test_create_sale_with_discount' panicked at src/repositories/sale_repository.rs:469:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::sale_repository::tests::test_find_sale_by_id stdout ----

thread 'repositories::sale_repository::tests::test_find_sale_by_id' panicked at src/repositories/sale_repository.rs:469:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::sale_repository::tests::test_find_today_sales stdout ----

thread 'repositories::sale_repository::tests::test_find_today_sales' panicked at src/repositories/sale_repository.rs:469:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::sale_repository::tests::test_get_daily_summary stdout ----

thread 'repositories::sale_repository::tests::test_get_daily_summary' panicked at src/repositories/sale_repository.rs:469:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::sale_repository::tests::test_get_next_daily_number stdout ----

thread 'repositories::sale_repository::tests::test_get_next_daily_number' panicked at src/repositories/sale_repository.rs:469:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::service_order_repository_test::test_create_service_order_increments_number stdout ----

thread 'repositories::service_order_repository_test::test_create_service_order_increments_number' panicked at src/repositories/service_order_repository_test.rs:21:53:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository::tests::test_create_stock_movement_entry stdout ----

thread 'repositories::stock_repository::tests::test_create_stock_movement_entry' panicked at src/repositories/stock_repository.rs:303:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository::tests::test_create_stock_movement_exit stdout ----

thread 'repositories::stock_repository::tests::test_create_stock_movement_exit' panicked at src/repositories/stock_repository.rs:303:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository::tests::test_find_expiring_lots stdout ----

thread 'repositories::stock_repository::tests::test_find_expiring_lots' panicked at src/repositories/stock_repository.rs:303:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository::tests::test_find_lots_by_product stdout ----

thread 'repositories::stock_repository::tests::test_find_lots_by_product' panicked at src/repositories/stock_repository.rs:303:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository::tests::test_find_movement_by_id stdout ----

thread 'repositories::stock_repository::tests::test_find_movement_by_id' panicked at src/repositories/stock_repository.rs:303:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository::tests::test_find_movements_by_product stdout ----

thread 'repositories::stock_repository::tests::test_find_movements_by_product' panicked at src/repositories/stock_repository.rs:303:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository::tests::test_find_recent_movements stdout ----

thread 'repositories::stock_repository::tests::test_find_recent_movements' panicked at src/repositories/stock_repository.rs:303:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository_test::test_create_stock_movement_entry stdout ----

thread 'repositories::stock_repository_test::test_create_stock_movement_entry' panicked at src/repositories/stock_repository_test.rs:21:53:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository_test::test_create_stock_movement_exit stdout ----

thread 'repositories::stock_repository_test::test_create_stock_movement_exit' panicked at src/repositories/stock_repository_test.rs:21:53:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository_test::test_find_movement_by_id stdout ----

thread 'repositories::stock_repository_test::test_find_movement_by_id' panicked at src/repositories/stock_repository_test.rs:21:53:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository_test::test_find_movement_by_id_not_found stdout ----

thread 'repositories::stock_repository_test::test_find_movement_by_id_not_found' panicked at src/repositories/stock_repository_test.rs:21:53:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository_test::test_find_movements_by_product stdout ----

thread 'repositories::stock_repository_test::test_find_movements_by_product' panicked at src/repositories/stock_repository_test.rs:21:53:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository_test::test_find_recent_movements stdout ----

thread 'repositories::stock_repository_test::test_find_recent_movements' panicked at src/repositories/stock_repository_test.rs:21:53:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::stock_repository_test::test_stock_update_after_movement stdout ----

thread 'repositories::stock_repository_test::test_stock_update_after_movement' panicked at src/repositories/stock_repository_test.rs:21:53:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::supplier_repository::supplier_repository_test::tests::test_create_duplicate_cnpj stdout ----

thread 'repositories::supplier_repository::supplier_repository_test::tests::test_create_duplicate_cnpj' panicked at src/repositories/supplier_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::supplier_repository::supplier_repository_test::tests::test_create_supplier stdout ----

thread 'repositories::supplier_repository::supplier_repository_test::tests::test_create_supplier' panicked at src/repositories/supplier_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::supplier_repository::supplier_repository_test::tests::test_delete_supplier stdout ----

thread 'repositories::supplier_repository::supplier_repository_test::tests::test_delete_supplier' panicked at src/repositories/supplier_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::supplier_repository::supplier_repository_test::tests::test_find_all_active stdout ----

thread 'repositories::supplier_repository::supplier_repository_test::tests::test_find_all_active' panicked at src/repositories/supplier_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::supplier_repository::supplier_repository_test::tests::test_find_by_cnpj stdout ----

thread 'repositories::supplier_repository::supplier_repository_test::tests::test_find_by_cnpj' panicked at src/repositories/supplier_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::supplier_repository::supplier_repository_test::tests::test_find_by_id stdout ----

thread 'repositories::supplier_repository::supplier_repository_test::tests::test_find_by_id' panicked at src/repositories/supplier_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))

---- repositories::supplier_repository::supplier_repository_test::tests::test_update_supplier stdout ----

thread 'repositories::supplier_repository::supplier_repository_test::tests::test_update_supplier' panicked at src/repositories/supplier_repository_test.rs:22:57:
called `Result::unwrap()` on an `Err` value: Execute(Database(SqliteError { code: 1555, message: "UNIQUE constraint failed: _sqlx_migrations.version" }))


failures:
    repositories::cash_repository::cash_repository_test::tests::test_add_movement
    repositories::cash_repository::cash_repository_test::tests::test_close_session
    repositories::cash_repository::cash_repository_test::tests::test_find_current_session
    repositories::cash_repository::cash_repository_test::tests::test_find_movements_by_session
    repositories::cash_repository::cash_repository_test::tests::test_open_session_already_open
    repositories::cash_repository::cash_repository_test::tests::test_open_session_success
    repositories::cash_repository::cash_repository_test::tests::test_session_history
    repositories::category_repository::category_repository_test::tests::test_create_category
    repositories::category_repository::category_repository_test::tests::test_delete_category
    repositories::category_repository::category_repository_test::tests::test_find_all_active
    repositories::category_repository::category_repository_test::tests::test_find_all_with_count
    repositories::category_repository::category_repository_test::tests::test_find_by_id
    repositories::category_repository::category_repository_test::tests::test_find_children
    repositories::category_repository::category_repository_test::tests::test_update_category
    repositories::employee_repository::employee_repository_test::tests::test_authenticate_pin
    repositories::employee_repository::employee_repository_test::tests::test_create_employee
    repositories::employee_repository::employee_repository_test::tests::test_create_employee_duplicate_pin
    repositories::employee_repository::employee_repository_test::tests::test_deactivate_employee
    repositories::employee_repository::employee_repository_test::tests::test_find_all_active
    repositories::employee_repository::employee_repository_test::tests::test_find_by_cpf
    repositories::employee_repository::employee_repository_test::tests::test_role_formatting
    repositories::employee_repository::employee_repository_test::tests::test_update_employee
    repositories::product_repository::product_repository_test::tests::test_create_product
    repositories::product_repository::product_repository_test::tests::test_create_product_duplicate_barcode
    repositories::product_repository::product_repository_test::tests::test_delete_product
    repositories::product_repository::product_repository_test::tests::test_find_by_barcode
    repositories::product_repository::product_repository_test::tests::test_find_by_internal_code
    repositories::product_repository::product_repository_test::tests::test_find_with_category_filter
    repositories::product_repository::product_repository_test::tests::test_get_low_stock_products
    repositories::product_repository::product_repository_test::tests::test_search_products
    repositories::product_repository::product_repository_test::tests::test_update_product
    repositories::sale_repository::tests::test_cancel_sale
    repositories::sale_repository::tests::test_create_sale_cash
    repositories::sale_repository::tests::test_create_sale_insufficient_stock
    repositories::sale_repository::tests::test_create_sale_with_discount
    repositories::sale_repository::tests::test_find_sale_by_id
    repositories::sale_repository::tests::test_find_today_sales
    repositories::sale_repository::tests::test_get_daily_summary
    repositories::sale_repository::tests::test_get_next_daily_number
    repositories::service_order_repository_test::test_create_service_order_increments_number
    repositories::stock_repository::tests::test_create_stock_movement_entry
    repositories::stock_repository::tests::test_create_stock_movement_exit
    repositories::stock_repository::tests::test_find_expiring_lots
    repositories::stock_repository::tests::test_find_lots_by_product
    repositories::stock_repository::tests::test_find_movement_by_id
    repositories::stock_repository::tests::test_find_movements_by_product
    repositories::stock_repository::tests::test_find_recent_movements
    repositories::stock_repository_test::test_create_stock_movement_entry
    repositories::stock_repository_test::test_create_stock_movement_exit
    repositories::stock_repository_test::test_find_movement_by_id
    repositories::stock_repository_test::test_find_movement_by_id_not_found
    repositories::stock_repository_test::test_find_movements_by_product
    repositories::stock_repository_test::test_find_recent_movements
    repositories::stock_repository_test::test_stock_update_after_movement
    repositories::supplier_repository::supplier_repository_test::tests::test_create_duplicate_cnpj
    repositories::supplier_repository::supplier_repository_test::tests::test_create_supplier
    repositories::supplier_repository::supplier_repository_test::tests::test_delete_supplier
    repositories::supplier_repository::supplier_repository_test::tests::test_find_all_active
    repositories::supplier_repository::supplier_repository_test::tests::test_find_by_cnpj
    repositories::supplier_repository::supplier_repository_test::tests::test_find_by_id
    repositories::supplier_repository::supplier_repository_test::tests::test_update_supplier

test result: FAILED. 89 passed; 61 failed; 0 ignored; 0 measured; 0 filtered out; finished in 8.69s

error: test failed, to rerun pass `--lib`
