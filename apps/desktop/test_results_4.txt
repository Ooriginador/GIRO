
 RUN  v2.1.9 /home/jhonslife/GIRO/apps/desktop

 ✓ tests/unit/utils/formatters.test.ts (51 tests) 123ms
 ✓ src/stores/__tests__/alert-store.test.ts (14 tests) 21ms
 ✓ src/lib/__tests__/formatters.test.ts (48 tests) 272ms
 ✓ src/hooks/__tests__/useSales.test.tsx (15 tests) 1018ms
 ✓ src/hooks/__tests__/useDashboard.test.tsx (7 tests) 795ms
   ✓ useDashboardStats > should fetch dashboard stats successfully 367ms
stderr | src/pages/products/__tests__/ProductsPage.test.tsx > ProductsPage > should render products and handle search with debounce
Warning: validateDOMNesting(...): <span> cannot appear as a child of <select>.
    at span
    at SelectValue (/home/jhonslife/GIRO/apps/desktop/src/pages/products/__tests__/ProductsPage.test.tsx:74:19)
    at SelectTrigger (/home/jhonslife/GIRO/apps/desktop/src/pages/products/__tests__/ProductsPage.test.tsx:69:21)
    at select
    at Select (/home/jhonslife/GIRO/apps/desktop/src/pages/products/__tests__/ProductsPage.test.tsx:52:14)
    at div
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:81:57
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:7:50
    at div
    at ProductsPage (/home/jhonslife/GIRO/apps/desktop/src/pages/products/ProductsPage.tsx:33:64)
    at Router (/home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/react-router@6.30.3_react@18.3.1/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/react-router@6.30.3_react@18.3.1/node_modules/react-router/dist/umd/react-router.development.js:1101:7)

 ✓ src/stores/__tests__/settings-store.test.ts (20 tests) 29ms
 ✓ src/hooks/__tests__/usePDV.test.tsx (10 tests) 597ms
 ✓ src/hooks/__tests__/useCategories.test.tsx (12 tests) 703ms
stdout | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle adding a cash movement (Suprimento)
Clicking confirm-supply

stderr | src/pages/pdv/__tests__/PDVPage.test.tsx > PDVPage > should handle F shortcuts
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | src/pages/pdv/__tests__/PDVPage.test.tsx > PDVPage > should handle quantity and discount confirmations via mouse with comma/dot logic
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | src/components/motoparts/__tests__/ServiceOrderForm.test.tsx > ServiceOrderForm > should show toast on submission error
Erro ao criar ordem de serviço: Error: API Fail
    at /home/jhonslife/GIRO/apps/desktop/src/components/motoparts/__tests__/ServiceOrderForm.test.tsx:248:43
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.3_@vitest+ui@4.0.16_jsdom@25.0.1/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11

 ✓ src/pages/cash/__tests__/CashControlPage.test.tsx (6 tests) 725ms
 ✓ src/components/motoparts/__tests__/ServiceOrderForm.test.tsx (5 tests) 1164ms
   ✓ ServiceOrderForm > should render the form and allow submission 435ms
stderr | src/pages/pdv/__tests__/PDVPage.test.tsx > PDVPage > should handle quantity and discount confirmations via mouse with comma/dot logic
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | src/pages/pdv/__tests__/PDVPage.test.tsx > PDVPage > should handle invalid quantity/discount inputs
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

 ❯ src/pages/pdv/__tests__/PDVPage.test.tsx (9 tests | 1 failed) 1829ms
   ✓ PDVPage > should handle F shortcuts 371ms
   ✓ PDVPage > should handle quantity and discount confirmations via mouse with comma/dot logic 361ms
   × PDVPage > should handle invalid quantity/discount inputs 407ms
     → expected "spy" to not be called at all, but actually been called 1 times

Received: 

  1st spy call:

    Array [
      "i1",
      10,
    ]


Number of calls: 1

 ✓ src/hooks/__tests__/useSuppliers.test.tsx (10 tests) 329ms
 ✓ src/hooks/__tests__/useStock.test.tsx (9 tests) 555ms
stdout | src/stores/__tests__/license-store.test.ts > license-store > should hydrate from disk successfully
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: {
  key: 'disk-key',
  info: { status: 'active', license_key: 'disk-key' },
  last_validated_at: '2026-01-15T12:42:29.827Z'
}
[LicenseStore] Within grace period, setting state to valid

stdout | src/stores/__tests__/license-store.test.ts > license-store > should handle missing license on disk
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed

stdout | src/stores/__tests__/license-store.test.ts > license-store > should handle disk hydration error
[LicenseStore] Hydrating from disk...

stderr | src/stores/__tests__/license-store.test.ts > license-store > should handle disk hydration error
[LicenseStore] Failed to hydrate license from disk: Error: Disk error
    at /home/jhonslife/GIRO/apps/desktop/src/stores/__tests__/license-store.test.ts:185:51
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)

 ✓ src/stores/__tests__/license-store.test.ts (11 tests) 20ms
stderr | src/pages/products/__tests__/CategoriesPage.test.tsx > CategoriesPage > Error States > should handle creation failure
Erro ao criar categoria: Error: Fail
    at /home/jhonslife/GIRO/apps/desktop/src/pages/products/__tests__/CategoriesPage.test.tsx:250:52
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)

stderr | src/pages/products/__tests__/CategoriesPage.test.tsx > CategoriesPage > Error States > should handle deactivation failure
Erro ao processar ação na categoria: Error: Fail
    at /home/jhonslife/GIRO/apps/desktop/src/pages/products/__tests__/CategoriesPage.test.tsx:268:52
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)

 ✓ src/hooks/__tests__/useCustomers.test.ts (11 tests) 538ms
   ✓ useCustomers hooks > useCustomerSearch > should perform debounced search 316ms
stderr | src/pages/products/__tests__/CategoriesPage.test.tsx > CategoriesPage > Error States > should handle reactivation failure
Erro ao processar ação na categoria: Error: Fail
    at /home/jhonslife/GIRO/apps/desktop/src/pages/products/__tests__/CategoriesPage.test.tsx:285:52
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)

 ✓ src/pages/products/__tests__/CategoriesPage.test.tsx (13 tests) 2624ms
   ✓ CategoriesPage > should create a new category 894ms
   ✓ CategoriesPage > should closeModal when clicking cancel in create dialog 433ms
 ✓ src/hooks/__tests__/useProducts.test.tsx (15 tests) 535ms
 ✓ src/components/tutorial/__tests__/tutorial-store.test.ts (15 tests) 19ms
 ✓ src/lib/__tests__/tauri.test.ts (12 tests) 22ms
stderr | src/components/motoparts/__tests__/ProductCompatibilityEditor.test.tsx > ProductCompatibilityEditor > should render the editor in full mode
Warning: Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?

Check the render method of `Primitive.button.SlotClone`.
    at AlertDialog (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-alert-dialog@1.1.15_@types+react-dom@18.3.7_@types+react@18.3.27__@type_2938e8bb4531c18dd665808ca65dbf8b/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs:18:11)
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs:33:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs:9:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs:33:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs:9:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-popper@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+react_c330846caea22d0bb9472d70882a3041/node_modules/@radix-ui/react-popper/dist/index.mjs:38:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-tooltip@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+reac_aced610d253c20559c8767bd1bee51a9/node_modules/@radix-ui/react-tooltip/dist/index.mjs:165:13
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at Popper (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-popper@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+react_c330846caea22d0bb9472d70882a3041/node_modules/@radix-ui/react-popper/dist/index.mjs:30:11)
    at Tooltip (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-tooltip@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+reac_aced610d253c20559c8767bd1bee51a9/node_modules/@radix-ui/react-tooltip/dist/index.mjs:73:5)
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at TooltipProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-tooltip@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+reac_aced610d253c20559c8767bd1bee51a9/node_modules/@radix-ui/react-tooltip/dist/index.mjs:29:5)
    at div
    at div (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/__tests__/ProductCompatibilityEditor.test.tsx:51:13)
    at CompatibilityItem (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/ProductCompatibilityEditor.tsx:477:30)
    at AnimatePresence (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/__tests__/ProductCompatibilityEditor.test.tsx:57:23)
    at div
    at div
    at div
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-scroll-area@1.2.10_@types+react-dom@18.3.7_@types+react@18.3.27__@types_5bcbc5a51cd2460e88b2b8df9637afcd/node_modules/@radix-ui/react-scroll-area/dist/index.mjs:94:13
    at div
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-scroll-area@1.2.10_@types+react-dom@18.3.7_@types+react@18.3.27__@types_5bcbc5a51cd2460e88b2b8df9637afcd/node_modules/@radix-ui/react-scroll-area/dist/index.mjs:32:7
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/scroll-area.tsx:9:56
    at div
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:81:57
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:7:50
    at ProductCompatibilityEditor (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/ProductCompatibilityEditor.tsx:32:3)
    at QueryClientProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+react-query@5.90.16_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/home/jhonslife/GIRO/apps/desktop/src/test/queryWrapper.tsx:12:22)
Warning: Received `true` for a non-boolean attribute `layout`.

If you want to write it to the DOM, pass a string instead: layout="true" or layout={value.toString()}.
    at div
    at div (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/__tests__/ProductCompatibilityEditor.test.tsx:51:13)
    at CompatibilityItem (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/ProductCompatibilityEditor.tsx:477:30)
    at AnimatePresence (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/__tests__/ProductCompatibilityEditor.test.tsx:57:23)
    at div
    at div
    at div
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-scroll-area@1.2.10_@types+react-dom@18.3.7_@types+react@18.3.27__@types_5bcbc5a51cd2460e88b2b8df9637afcd/node_modules/@radix-ui/react-scroll-area/dist/index.mjs:94:13
    at div
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-scroll-area@1.2.10_@types+react-dom@18.3.7_@types+react@18.3.27__@types_5bcbc5a51cd2460e88b2b8df9637afcd/node_modules/@radix-ui/react-scroll-area/dist/index.mjs:32:7
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/scroll-area.tsx:9:56
    at div
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:81:57
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:7:50
    at ProductCompatibilityEditor (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/ProductCompatibilityEditor.tsx:32:3)
    at QueryClientProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+react-query@5.90.16_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/home/jhonslife/GIRO/apps/desktop/src/test/queryWrapper.tsx:12:22)

 ✓ src/pages/suppliers/__tests__/SuppliersPage.test.tsx (7 tests) 3436ms
   ✓ SuppliersPage > should create a new supplier 1163ms
   ✓ SuppliersPage > should show validation errors for invalid inputs 639ms
   ✓ SuppliersPage > should edit a supplier and handle optional fields omission 366ms
   ✓ SuppliersPage > should filter by search text (name, tradeName, cnpj) 779ms
stderr | src/components/motoparts/__tests__/ProductCompatibilityEditor.test.tsx > ProductCompatibilityEditor > should handle saving changes
Warning: An update to ProductCompatibilityEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProductCompatibilityEditor (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/ProductCompatibilityEditor.tsx:32:3)
    at QueryClientProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+react-query@5.90.16_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/home/jhonslife/GIRO/apps/desktop/src/test/queryWrapper.tsx:12:22)
Warning: An update to ScrollArea inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-scroll-area@1.2.10_@types+react-dom@18.3.7_@types+react@18.3.27__@types_5bcbc5a51cd2460e88b2b8df9637afcd/node_modules/@radix-ui/react-scroll-area/dist/index.mjs:32:7
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/scroll-area.tsx:9:56
    at div
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:81:57
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:7:50
    at ProductCompatibilityEditor (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/ProductCompatibilityEditor.tsx:32:3)
    at QueryClientProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+react-query@5.90.16_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/home/jhonslife/GIRO/apps/desktop/src/test/queryWrapper.tsx:12:22)
Warning: An update to ScrollArea inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-scroll-area@1.2.10_@types+react-dom@18.3.7_@types+react@18.3.27__@types_5bcbc5a51cd2460e88b2b8df9637afcd/node_modules/@radix-ui/react-scroll-area/dist/index.mjs:32:7
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/scroll-area.tsx:9:56
    at div
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:81:57
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:7:50
    at ProductCompatibilityEditor (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/ProductCompatibilityEditor.tsx:32:3)
    at QueryClientProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+react-query@5.90.16_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/home/jhonslife/GIRO/apps/desktop/src/test/queryWrapper.tsx:12:22)

stderr | src/components/motoparts/__tests__/ProductCompatibilityEditor.test.tsx > CompatibilityQuickView > should render items up to maxVisible and show hidden count
Warning: Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?

Check the render method of `Primitive.button.SlotClone`.
    at Badge (/home/jhonslife/GIRO/apps/desktop/src/components/ui/badge.tsx:26:18)
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs:33:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs:9:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs:33:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs:9:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-popper@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+react_c330846caea22d0bb9472d70882a3041/node_modules/@radix-ui/react-popper/dist/index.mjs:38:13
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-tooltip@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+reac_aced610d253c20559c8767bd1bee51a9/node_modules/@radix-ui/react-tooltip/dist/index.mjs:165:13
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at Popper (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-popper@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+react_c330846caea22d0bb9472d70882a3041/node_modules/@radix-ui/react-popper/dist/index.mjs:30:11)
    at Tooltip (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-tooltip@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+reac_aced610d253c20559c8767bd1bee51a9/node_modules/@radix-ui/react-tooltip/dist/index.mjs:73:5)
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at TooltipProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-tooltip@1.2.8_@types+react-dom@18.3.7_@types+react@18.3.27__@types+reac_aced610d253c20559c8767bd1bee51a9/node_modules/@radix-ui/react-tooltip/dist/index.mjs:29:5)
    at div
    at CompatibilityQuickView (/home/jhonslife/GIRO/apps/desktop/src/components/motoparts/ProductCompatibilityEditor.tsx:669:3)

 ✓ src/components/motoparts/__tests__/ProductCompatibilityEditor.test.tsx (11 tests) 660ms
 ✓ src/lib/__tests__/utils.test.ts (35 tests) 59ms
 ✓ tests/unit/hardware/scanner.mock.test.ts (15 tests) 16ms
 ✓ src/pages/auth/__tests__/LoginPage.test.tsx (14 tests) 1517ms
   ✓ LoginPage > should render numeric keypad 310ms
 ✓ src/pages/products/__tests__/ProductsPage.test.tsx (17 tests) 5104ms
   ✓ ProductsPage > should render products and handle search with debounce 1388ms
   ✓ ProductsPage > should handle search with barcode 899ms
   ✓ ProductsPage > should show empty state when search returns nothing 823ms
 ✓ src/hooks/__tests__/useAlerts.test.tsx (8 tests) 509ms
 ✓ src/components/pdv/__tests__/NumPad.test.tsx (19 tests) 938ms
   ✓ NumPad > rendering > should render all number buttons 352ms
 ✓ src/components/motoparts/__tests__/WarrantyDetails.test.tsx (7 tests) 834ms
 ✓ src/hooks/__tests__/useCashSession.test.tsx (7 tests) 434ms
stderr | src/pages/settings/__tests__/SettingsPage.test.tsx > SettingsPage > should render company settings by default
Warning: validateDOMNesting(...): <span> cannot appear as a child of <select>.
    at span
    at SelectValue (/home/jhonslife/GIRO/apps/desktop/src/pages/settings/__tests__/SettingsPage.test.tsx:26:19)
    at SelectTrigger (/home/jhonslife/GIRO/apps/desktop/src/pages/settings/__tests__/SettingsPage.test.tsx:21:21)
    at select
    at Select (/home/jhonslife/GIRO/apps/desktop/src/pages/settings/__tests__/SettingsPage.test.tsx:16:14)
    at div
    at div
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:81:57
    at div
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/card.tsx:7:50
    at div
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at Presence (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-presence@1.1.5_@types+react-dom@18.3.7_@types+react@18.3.27__@types+rea_64d32f1aa8205b8137d1ae7fefc406b4/node_modules/@radix-ui/react-presence/dist/index.mjs:19:11)
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-tabs@1.1.13_@types+react-dom@18.3.7_@types+react@18.3.27__@types+react@_0aaeef7d22accbb55e056dc5f51b50fa/node_modules/@radix-ui/react-tabs/dist/index.mjs:147:13
    at /home/jhonslife/GIRO/apps/desktop/src/components/ui/tabs.tsx:51:57
    at div
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.3.7_@types+react@18.3.27__@types+re_fcd3de21280e20c51ab14304cef2fe55/node_modules/@radix-ui/react-primitive/dist/index.mjs:28:13
    at Provider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@18.3.27_react@18.3.1/node_modules/@radix-ui/react-context/dist/index.mjs:27:15)
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@radix-ui+react-tabs@1.1.13_@types+react-dom@18.3.7_@types+react@18.3.27__@types+react@_0aaeef7d22accbb55e056dc5f51b50fa/node_modules/@radix-ui/react-tabs/dist/index.mjs:24:7
    at div
    at SettingsPage (/home/jhonslife/GIRO/apps/desktop/src/pages/settings/SettingsPage.tsx:57:58)
Warning: An update to SettingsPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at SettingsPage (/home/jhonslife/GIRO/apps/desktop/src/pages/settings/SettingsPage.tsx:57:58)
Warning: An update to SettingsPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at SettingsPage (/home/jhonslife/GIRO/apps/desktop/src/pages/settings/SettingsPage.tsx:57:58)

 ✓ src/stores/__tests__/pdv-store.test.ts (13 tests) 9ms
 ✓ src/components/motoparts/__tests__/ServiceOrderDetails.test.tsx (6 tests) 800ms
   ✓ ServiceOrderDetails > should handle start action 335ms
 ✓ src/pages/stock/__tests__/ExpirationPage.test.tsx (6 tests) 693ms
stderr | src/components/motoparts/__tests__/WarrantyForm.test.tsx > WarrantyForm > should show error toast on failure
Erro ao registrar garantia: Error: Fail
    at /home/jhonslife/GIRO/apps/desktop/src/components/motoparts/__tests__/WarrantyForm.test.tsx:148:46
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)
    at file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.3_@vitest+ui@4.0.16_jsdom@25.0.1/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11

 ✓ src/components/motoparts/__tests__/WarrantyForm.test.tsx (5 tests) 1072ms
   ✓ WarrantyForm > should search for products 305ms
   ✓ WarrantyForm > should handle submission 329ms
 ✓ src/components/ui/__tests__/Card.test.tsx (21 tests) 259ms
 ✓ src/pages/settings/__tests__/SettingsPage.test.tsx (6 tests) 2149ms
   ✓ SettingsPage > should switch between all tabs 635ms
   ✓ SettingsPage > should handle theme changes 305ms
   ✓ SettingsPage > should handle scanner and ports 477ms
   ✓ SettingsPage > should handle printer and scale tests 338ms
stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should show loading state on mount
[LicenseActivationPage] Initializing...

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should render activation form when no license exists
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license found, requiring activation.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should format license key during typing
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license found, requiring activation.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should handle successful activation
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license found, requiring activation.

 ✓ src/pages/stock/__tests__/StockMovementsPage.test.tsx (7 tests) 512ms
 ✓ src/components/ui/__tests__/Button.test.tsx (23 tests) 570ms
 ✓ src/pages/dashboard/__tests__/DashboardPage.test.tsx (7 tests) 498ms
 ✓ src/hooks/__tests__/usePriceHistory.test.tsx (14 tests) 325ms
 ✓ src/hooks/__tests__/useKeyboard.test.tsx (11 tests) 70ms
 ✓ src/components/nfce/__tests__/ContingencyManager.test.tsx (5 tests) 343ms
 ✓ tests/unit/hardware/scale.mock.test.ts (18 tests) 16ms
 ✓ tests/integration/sale.flow.test.ts (6 tests) 8ms
 ✓ src/__tests__/App.test.tsx (7 tests) 132ms
 ✓ tests/unit/hardware/printer.mock.test.ts (13 tests) 10ms
 ✓ src/pages/reports/__tests__/SalesReportPage.test.tsx (9 tests) 640ms
stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should handle activation error
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license found, requiring activation.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect if valid license is found on mount
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseActivationPage] Post-hydration: key=EXISTING-KEY, state=valid
[LicenseActivationPage] Valid license or within grace period, proceeding to login

 ✓ src/pages/license/__tests__/LicenseActivationPage.test.tsx (6 tests) 1929ms
   ✓ LicenseActivationPage > should handle successful activation 1587ms
 ✓ src/components/ui/__tests__/Input.test.tsx (19 tests) 230ms
 ✓ src/hooks/__tests__/useServiceOrders.test.tsx (8 tests) 119ms
 ✓ tests/integration/cash.flow.test.ts (6 tests) 14ms
 ✓ src/components/motoparts/__tests__/ServiceOrderList.test.tsx (7 tests) 368ms
 ✓ src/pages/employees/__tests__/EmployeesPage.test.tsx (7 tests) 2363ms
   ✓ EmployeesPage > should create a new employee 770ms
   ✓ EmployeesPage > should edit an employee 559ms
stderr | src/hooks/__tests__/useVehicles.test.tsx > useVehicles > should reset state
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@testing-library+react@16.3.1_@testing-library+dom@10.4.1_@types+react-dom@18.3.7_@type_d9437e0482bb9cab2d9082dbcc570f70/node_modules/@testing-library/react/dist/pure.js:328:5)
    at QueryClientProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+react-query@5.90.16_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/home/jhonslife/GIRO/apps/desktop/src/test/queryWrapper.tsx:12:22)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@testing-library+react@16.3.1_@testing-library+dom@10.4.1_@types+react-dom@18.3.7_@type_d9437e0482bb9cab2d9082dbcc570f70/node_modules/@testing-library/react/dist/pure.js:328:5)
    at QueryClientProvider (file:///home/jhonslife/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+react-query@5.90.16_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/home/jhonslife/GIRO/apps/desktop/src/test/queryWrapper.tsx:12:22)

 ✓ src/components/tutorial/__tests__/useTutorial.test.tsx (9 tests) 41ms
 ✓ src/hooks/__tests__/useVehicles.test.tsx (6 tests) 280ms
 ✓ src/pages/stock/__tests__/StockPage.test.tsx (7 tests) 381ms
 ✓ src/components/shared/__tests__/FeatureGate.test.tsx (7 tests) 59ms
 ✓ src/components/motoparts/__tests__/MotopartsDashboard.test.tsx (3 tests) 198ms
 ✓ src/stores/__tests__/auth-store.test.ts (7 tests) 15ms
 ✓ src/pages/reports/__tests__/ReportsPage.test.tsx (3 tests) 652ms
   ✓ ReportsPage > should render all report category cards with correct links 376ms
 ✓ src/lib/__tests__/design-tokens.test.ts (15 tests) 14ms
 ✓ src/hooks/__tests__/useWarranties.test.tsx (6 tests) 170ms
 ✓ src/components/motoparts/__tests__/VehicleSelector.test.tsx (5 tests) 689ms
   ✓ VehicleSearch > should search and select vehicle 498ms
 ✓ src/components/pdv/__tests__/CartItemRow.test.tsx (10 tests) 305ms
 ✓ src/pages/products/__tests__/ProductFormPage.test.tsx (4 tests) 772ms
   ✓ ProductFormPage > Create Mode > should render page title for new product 343ms
 ✓ src/components/layout/__tests__/Sidebar.test.tsx (9 tests) 544ms
 ✓ src/hooks/__tests__/useAuth.test.tsx (4 tests) 281ms
 ✓ src/hooks/__tests__/useEmployees.test.ts (6 tests) 183ms
 ✓ src/pages/stock/__tests__/StockEntryPage.test.tsx (4 tests) 1074ms
   ✓ StockEntryPage > should allow searching and selecting a product 360ms
   ✓ StockEntryPage > should submit stock entry with all fields 585ms
 ✓ src/components/ui/__tests__/Badge.test.tsx (12 tests) 105ms
 ✓ src/components/motoparts/__tests__/CustomerSearch.test.tsx (5 tests) 481ms
 ✓ src/components/pdv/__tests__/ProductCard.test.tsx (11 tests) 358ms
 ✓ src/hooks/__tests__/useToast.test.ts (7 tests) 24ms
 ✓ tests/unit/utils/validators.test.ts (11 tests) 17ms
 ✓ src/components/ui/__tests__/Switch.test.tsx (11 tests) 249ms
 ✓ src/stores/__tests__/useBusinessProfile.test.ts (8 tests) 20ms
stderr | src/components/pdv/__tests__/PaymentModal.test.tsx > PaymentModal > renders correctly when open
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | src/components/pdv/__tests__/PaymentModal.test.tsx > PaymentModal > switches to cash payment view
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | src/components/pdv/__tests__/PaymentModal.test.tsx > PaymentModal > switches to split payment view
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

 ✓ src/components/pdv/__tests__/PaymentModal.test.tsx (3 tests) 365ms
 ✓ src/components/motoparts/__tests__/ServiceOrderManager.test.tsx (1 test) 100ms
 ✓ src/components/tutorial/__tests__/TutorialHub.test.tsx (6 tests) 457ms
 ✓ src/components/motoparts/__tests__/WarrantyManager.test.tsx (1 test) 91ms
 ✓ src/components/layout/__tests__/Header.test.tsx (7 tests) 253ms
stderr | src/components/layout/__tests__/Footer.test.tsx > Footer > should render footer element
Warning: An update to Footer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Footer (/home/jhonslife/GIRO/apps/desktop/src/components/layout/Footer.tsx:107:20)

stderr | src/components/layout/__tests__/Footer.test.tsx > Footer > should display hardware status indicators
Warning: An update to Footer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Footer (/home/jhonslife/GIRO/apps/desktop/src/components/layout/Footer.tsx:107:20)

stderr | src/components/layout/__tests__/Footer.test.tsx > Footer > should display keyboard shortcuts
Warning: An update to Footer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Footer (/home/jhonslife/GIRO/apps/desktop/src/components/layout/Footer.tsx:107:20)

stderr | src/components/layout/__tests__/Footer.test.tsx > Footer > should display version number
Warning: An update to Footer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Footer (/home/jhonslife/GIRO/apps/desktop/src/components/layout/Footer.tsx:107:20)

stderr | src/components/layout/__tests__/Footer.test.tsx > Footer > should display shortcuts hint label
Warning: An update to Footer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Footer (/home/jhonslife/GIRO/apps/desktop/src/components/layout/Footer.tsx:107:20)

 ✓ src/components/layout/__tests__/Footer.test.tsx (5 tests) 227ms
 ✓ src/pages/alerts/__tests__/AlertsPage.test.tsx (3 tests) 363ms
 ✓ src/components/pdv/__tests__/SaleReceipt.test.tsx (2 tests) 115ms
 ✓ src/components/shared/__tests__/LoadingPage.test.tsx (3 tests) 50ms
 ✓ src/components/layout/__tests__/AppShell.test.tsx (4 tests) 106ms
 ✓ src/components/motoparts/__tests__/WarrantyList.test.tsx (2 tests) 200ms
 ✓ src/pages/motoparts/__tests__/WarrantiesPage.test.tsx (1 test) 29ms
 ✓ src/pages/setup/__tests__/InitialSetupPage.test.tsx (2 tests) 92ms
 ✓ src/pages/motoparts/__tests__/ServiceOrdersPage.test.tsx (1 test) 24ms

⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/pages/pdv/__tests__/PDVPage.test.tsx > PDVPage > should handle invalid quantity/discount inputs
AssertionError: expected "spy" to not be called at all, but actually been called 1 times

Received: 

  1st spy call:

    Array [
      "i1",
      10,
    ]


Number of calls: 1

 ❯ src/pages/pdv/__tests__/PDVPage.test.tsx:289:45
    287|     await user.type(qtyInput, '-10');
    288|     await user.click(screen.getByRole('button', { name: /Confirmar/i }…
    289|     expect(mockPDVStore.updateQuantity).not.toHaveBeenCalled();
       |                                             ^
    290| 
    291|     // Non-numeric discount should be 0

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯

 Test Files  1 failed | 88 passed (89)
      Tests  1 failed | 873 passed (874)
   Start at  08:42:21
   Duration  21.44s (transform 7.37s, setup 12.92s, collect 55.79s, tests 47.95s, environment 71.29s, prepare 17.64s)

